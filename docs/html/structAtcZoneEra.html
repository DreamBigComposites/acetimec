<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceTimeC: AtcZoneEra Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceTimeC
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">Date and time library in C that supports timezones from the TZ Database.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structAtcZoneEra-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AtcZoneEra Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An entry in ZoneInfo which describes which ZonePolicy was being followed during a particular time period.  
 <a href="structAtcZoneEra.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="zone__info_8h_source.html">zone_info.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for AtcZoneEra:</div>
<div class="dyncontent">
<div class="center"><img src="structAtcZoneEra__coll__graph.png" border="0" usemap="#AtcZoneEra_coll__map" alt="Collaboration graph"/></div>
<map name="AtcZoneEra_coll__map" id="AtcZoneEra_coll__map">
<area shape="rect" title="An entry in ZoneInfo which describes which ZonePolicy was being followed during a particular time per..." alt="" coords="14,184,111,211"/>
<area shape="rect" href="structAtcZonePolicy.html" title="A collection of transition rules which describe the DST rules of a given administrative region." alt="" coords="5,95,120,121"/>
<area shape="rect" href="structAtcZoneRule.html" title="A time zone transition rule." alt="" coords="10,5,115,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aeda0623ee86dc3ff6b74132716459696"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structAtcZonePolicy.html">AtcZonePolicy</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#aeda0623ee86dc3ff6b74132716459696">zone_policy</a></td></tr>
<tr class="memdesc:aeda0623ee86dc3ff6b74132716459696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zone policy, determined by the RULES column.  <a href="structAtcZoneEra.html#aeda0623ee86dc3ff6b74132716459696">More...</a><br /></td></tr>
<tr class="separator:aeda0623ee86dc3ff6b74132716459696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4242f6211236aa265ea77d8a56e96bd6"><td class="memItemLeft" align="right" valign="top">const char *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#a4242f6211236aa265ea77d8a56e96bd6">format</a></td></tr>
<tr class="memdesc:a4242f6211236aa265ea77d8a56e96bd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zone abbreviations (e.g.  <a href="structAtcZoneEra.html#a4242f6211236aa265ea77d8a56e96bd6">More...</a><br /></td></tr>
<tr class="separator:a4242f6211236aa265ea77d8a56e96bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685ac5ee88953be589c34f007f27bd98"><td class="memItemLeft" align="right" valign="top">const int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#a685ac5ee88953be589c34f007f27bd98">offset_code</a></td></tr>
<tr class="memdesc:a685ac5ee88953be589c34f007f27bd98"><td class="mdescLeft">&#160;</td><td class="mdescRight">UTC offset in 15 min increments.  <a href="structAtcZoneEra.html#a685ac5ee88953be589c34f007f27bd98">More...</a><br /></td></tr>
<tr class="separator:a685ac5ee88953be589c34f007f27bd98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a9698e4668707a8d0471b355142cc0"><td class="memItemLeft" align="right" valign="top">const int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#a52a9698e4668707a8d0471b355142cc0">delta_code</a></td></tr>
<tr class="memdesc:a52a9698e4668707a8d0471b355142cc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">If zone_policy is nullptr, then this indicates the DST offset in 15 minute increments as defined by the RULES column in 'hh:mm' format.  <a href="structAtcZoneEra.html#a52a9698e4668707a8d0471b355142cc0">More...</a><br /></td></tr>
<tr class="separator:a52a9698e4668707a8d0471b355142cc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65c6fff84f5a44a528febe6ffaff2c9"><td class="memItemLeft" align="right" valign="top">const int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#ac65c6fff84f5a44a528febe6ffaff2c9">until_year_tiny</a></td></tr>
<tr class="memdesc:ac65c6fff84f5a44a528febe6ffaff2c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Era is valid until currentTime &lt; untilYear.  <a href="structAtcZoneEra.html#ac65c6fff84f5a44a528febe6ffaff2c9">More...</a><br /></td></tr>
<tr class="separator:ac65c6fff84f5a44a528febe6ffaff2c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a492bc37702726539af3ba704c472749b"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#a492bc37702726539af3ba704c472749b">until_month</a></td></tr>
<tr class="memdesc:a492bc37702726539af3ba704c472749b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The month field in UNTIL (1-12).  <a href="structAtcZoneEra.html#a492bc37702726539af3ba704c472749b">More...</a><br /></td></tr>
<tr class="separator:a492bc37702726539af3ba704c472749b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a792b37ac36b539290692a206d7ad8ed3"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#a792b37ac36b539290692a206d7ad8ed3">until_day</a></td></tr>
<tr class="memdesc:a792b37ac36b539290692a206d7ad8ed3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The day field in UNTIL (1-31).  <a href="structAtcZoneEra.html#a792b37ac36b539290692a206d7ad8ed3">More...</a><br /></td></tr>
<tr class="separator:a792b37ac36b539290692a206d7ad8ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac16fd5900613d5c50e30930f4fce4544"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#ac16fd5900613d5c50e30930f4fce4544">until_time_code</a></td></tr>
<tr class="memdesc:ac16fd5900613d5c50e30930f4fce4544"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time field of UNTIL field in 15-minute increments.  <a href="structAtcZoneEra.html#ac16fd5900613d5c50e30930f4fce4544">More...</a><br /></td></tr>
<tr class="separator:ac16fd5900613d5c50e30930f4fce4544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac722c4368462906bec950f4bec0d0127"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAtcZoneEra.html#ac722c4368462906bec950f4bec0d0127">until_time_modifier</a></td></tr>
<tr class="memdesc:ac722c4368462906bec950f4bec0d0127"><td class="mdescLeft">&#160;</td><td class="mdescRight">The until_time_modifier is a packed field containing 2 pieces of info:  <a href="structAtcZoneEra.html#ac722c4368462906bec950f4bec0d0127">More...</a><br /></td></tr>
<tr class="separator:ac722c4368462906bec950f4bec0d0127"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An entry in ZoneInfo which describes which ZonePolicy was being followed during a particular time period. </p>
<p>Corresponds to one line of the ZONE record in the TZ Database file ending with an UNTIL field. The ZonePolicy is determined by the RULES column in the TZ Database file.</p>
<p>There are 2 types of ZoneEra: 1) zone_policy == nullptr. Then delta_code determines the additional offset from offset_code. A value of '-' in the TZ Database file is stored as 0. 2) zone_policy != nullptr. Then the delta_code offset is given by the ZoneRule.delta_code of the ZoneRule which matches the time instant of interest. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00209">209</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a52a9698e4668707a8d0471b355142cc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52a9698e4668707a8d0471b355142cc0">&#9670;&nbsp;</a></span>delta_code</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int8_t AtcZoneEra::delta_code</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If zone_policy is nullptr, then this indicates the DST offset in 15 minute increments as defined by the RULES column in 'hh:mm' format. </p>
<p>If the 'RULES' column is '-', then the delta_code is 0.</p>
<p>If the '&ndash;scope extended' flag is given to tzcompiler.py, the 'delta_code` should be interpreted as a uint8_t field, composed of two 4-bit fields:</p>
<ul>
<li>The upper 4-bits is an unsigned integer from 0 to 14 that represents the one-minute remainder from the offset_code. This allows us to capture STDOFF offsets in 1-minute resolution.</li>
<li>The lower 4-bits is an unsigned integer that holds (originalDeltaCode</li>
<li>4). This allows us to represent DST offsets from -1:00 to +2:45, in 15-minute increments.</li>
</ul>
<p>The extended::ZoneEraBroker::deltaMinutes() and offsetMinutes() know how to convert offset_code and delta_code into the appropriate minutes. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00264">264</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="a4242f6211236aa265ea77d8a56e96bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4242f6211236aa265ea77d8a56e96bd6">&#9670;&nbsp;</a></span>format</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* const AtcZoneEra::format</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zone abbreviations (e.g. </p>
<p>PST, EST) determined by the FORMAT column. It has 3 encodings in the TZ DB files:</p>
<p>1) A fixed string, e.g. "GMT". 2) Two strings separated by a '/', e.g. "-03/-02" indicating "{std}/{dst}" options. 3) A single string with a substitution, e.g. "E%sT", where the "%s" is replaced by the LETTER value from the ZoneRule.</p>
<p>BasicZoneProcessor supports only a single letter subsitution from LETTER, but ExtendedZoneProcessor supports substituting multi-character strings (e.g. "CAT", "DD", "+00").</p>
<p>The TZ DB files use 's' to indicate the substitution, but for simplicity, AceTime replaces the "%s" with just a '' character with no loss of functionality. This also makes the string-replacement code a little simpler. For example, 'EsT' is stored as 'ET', and the LETTER substitution is performed on the '' character.</p>
<p>This field will never be a 'nullptr' if it was derived from an actual entry from the TZ dtabase. There is an internal object named <code>ExtendedZoneProcessor::kAnchorEra</code> which does set this field to nullptr. Maybe it should be set to ""? </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00241">241</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="a685ac5ee88953be589c34f007f27bd98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685ac5ee88953be589c34f007f27bd98">&#9670;&nbsp;</a></span>offset_code</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int8_t AtcZoneEra::offset_code</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UTC offset in 15 min increments. </p>
<p>Determined by the STDOFF column. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00244">244</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="a792b37ac36b539290692a206d7ad8ed3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a792b37ac36b539290692a206d7ad8ed3">&#9670;&nbsp;</a></span>until_day</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t AtcZoneEra::until_day</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The day field in UNTIL (1-31). </p>
<p>Will never be 0. Also, there's no need for untilDayOfWeek, because the database generator will resolve the exact day of month based on the known year and month. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00280">280</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="a492bc37702726539af3ba704c472749b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a492bc37702726539af3ba704c472749b">&#9670;&nbsp;</a></span>until_month</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t AtcZoneEra::until_month</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The month field in UNTIL (1-12). </p>
<p>Will never be 0. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00273">273</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="ac16fd5900613d5c50e30930f4fce4544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac16fd5900613d5c50e30930f4fce4544">&#9670;&nbsp;</a></span>until_time_code</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t AtcZoneEra::until_time_code</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The time field of UNTIL field in 15-minute increments. </p>
<p>A range of 00:00 to 25:00 corresponds to 0-100. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00286">286</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="ac722c4368462906bec950f4bec0d0127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac722c4368462906bec950f4bec0d0127">&#9670;&nbsp;</a></span>until_time_modifier</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t AtcZoneEra::until_time_modifier</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The until_time_modifier is a packed field containing 2 pieces of info: </p>
<ul>
<li>The upper 4 bits represent the UNTIL time suffix: 'w', 's' or 'u', represented by kAtcSuffixW, kAtcSuffixS and kAtcSuffixU.</li>
<li>The lower 4 bits represent the remaining 0-14 minutes of the UNTIL field after truncation into untilTimeCode. In other words, the full UNTIL field in one-minute resolution is (15 * untilTimeCode + (until_time_modifier &amp; 0x0f)). </li>
</ul>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00298">298</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="ac65c6fff84f5a44a528febe6ffaff2c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac65c6fff84f5a44a528febe6ffaff2c9">&#9670;&nbsp;</a></span>until_year_tiny</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int8_t AtcZoneEra::until_year_tiny</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Era is valid until currentTime &lt; untilYear. </p>
<p>Stored as (year - 2000) in a single byte to save space. Comes from the UNTIL column. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00270">270</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<a id="aeda0623ee86dc3ff6b74132716459696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeda0623ee86dc3ff6b74132716459696">&#9670;&nbsp;</a></span>zone_policy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structAtcZonePolicy.html">AtcZonePolicy</a>* const AtcZoneEra::zone_policy</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zone policy, determined by the RULES column. </p>
<p>Set to nullptr if the RULES column is '-' or an explicit DST shift in the form of 'hh:mm'. </p>

<p class="definition">Definition at line <a class="el" href="zone__info_8h_source.html#l00214">214</a> of file <a class="el" href="zone__info_8h_source.html">zone_info.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/brian/src/AceTimeC/src/ace_time_c/<a class="el" href="zone__info_8h_source.html">zone_info.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
